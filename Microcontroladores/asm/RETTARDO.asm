	PROCESSOR	P16F887
	INCLUDE		<P16F887.INC>

;	_CONFIG _CONFIG1, (_INTRC_OSC_NOCLKOUT & _WDT_OFF & _PWRTE_OFF & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOR_OFF & _IESO_OFF & _FCMEN_OFF & _LVP_OFF & _DEBUG_OFF)
;	_CONFIG _CONFIG2, (_WRT_OFF & _BOR40V)



CONT	EQU		0x20
VCA		EQU		0x21
VCB		EQU		0X22
VCC		EQU		0x23

		ORG		0x00
		BANKSEL	ANSEL
		CLRF	ANSEL
		CLRF	ANSELH
		BANKSEL	TRISA
		MOVLW	0xFF
		MOVWF	TRISA
		CLRF	TRISB
		CLRF	TRISC
		CLRF	TRISD
		CLRF	TRISE
		BANKSEL	PORTA
C_P
		CLRF	CONT
C_A
		MOVF	CONT,W
		MOVWF	PORTC
		;CALL	LEC
		CALL	RET
		INCFSZ	CONT,F
		GOTO	C_A
	
		MOVLW	0xFF
		MOVWF	CONT
C_D
		MOVWF	PORTC
		CALL	LEC
		CALL	RET
		MOVLW	0x01
		SUBWF	CONT,F
		BTFSC	STATUS,C
		GOTO	C_D
		GOTO	C_P

RET	
		MOVLW	0x04
		MOVWF	VCC
CIC	
		MOVLW	0xFA
		MOVWF	VCB
CIB	
		MOVLW	0xF9
		MOVWF	VCA
CIA	
		NOP
		DECFSZ	VCA,F
		GOTO	CIA
		DECFSZ	VCB,F
		GOTO	CIB
		DECFSZ	VCC,F
		GOTO	CIC
		RETURN

LEC
		MOVF	PORTA,W
		MOVWF	PORTB	
		RETURN
		END