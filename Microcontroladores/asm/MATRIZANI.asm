	PROCESSOR	P16F887
	INCLUDE		<P16F887.INC>

	__CONFIG _CONFIG1, (_INTRC_OSC_NOCLKOUT & _WDT_OFF & _PWRTE_OFF & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOR_OFF & _IESO_OFF & _FCMEN_OFF & _LVP_OFF & _DEBUG_OFF)
	__CONFIG _CONFIG2, (_WRT_OFF & _BOR40V)
	
CX1		EQU			0x21
VC0		EQU			0x22
VC1		EQU			0x23
VC2		EQU			0x24
VC3		EQU			0x25
VC4		EQU			0x26
VC5		EQU			0x27
VC6		EQU			0x28
VC7		EQU			0x29
VC00	EQU			0x30
VC11	EQU			0x31
VC22	EQU			0x32
VC33	EQU			0x33
VC44	EQU			0x34
VC55	EQU			0x35
VC66	EQU			0x36
VC77	EQU			0x37	
VX		EQU			0x38
CL		EQU			0x39
CCL		EQU			0x40
CX2		EQU			0x41
		ORG			0x00
		BANKSEL		ANSEL
		MOVLW		0xFF
		MOVWF		ANSEL
		CLRF		ANSELH
		
		BANKSEL		TRISA
		CLRF		TRISA
		CLRF		TRISB
		CLRF		TRISC
		CLRF		TRISD
		MOVLW		0x07
		MOVWF		TRISE
		MOVLW		0xD6
		MOVWF		OPTION_REG
		CLRF		ADCON1
		
		BANKSEL		PORTA

C_P
		MOVLW		0x2E
		MOVWF		CL
		CLRF		CCL

C_MOV	

		MOVLW		0x0A
		MOVWF		CX1	
		MOVLW		0x0A
		MOVWF		CX2
C_MOS1
			
		MOVF		VC0,W
		MOVWF		PORTB
		MOVLW		0x7F
		MOVWF		PORTC
		CALL 		RT	
		
		MOVF		VC1,W
		MOVWF		PORTB
		MOVLW		0xBF
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC2,W
		MOVWF		PORTB
		MOVLW		0xDF
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC3,W
		MOVWF		PORTB
		MOVLW		0xEF
		MOVWF		PORTC
		CALL 		RT	
		
		MOVF		VC4,W
		MOVWF		PORTB
		MOVLW		0xF7
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC5,W
		MOVWF		PORTB
		MOVLW		0xFB
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC6,W
		MOVWF		PORTB
		MOVLW		0xFD
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC7,W
		MOVWF		PORTB
		MOVLW		0xFE
		MOVWF		PORTC
		CALL 		RT

		DECFSZ		CX1,F
		GOTO		C_MOS1
		
		CALL 		MOV1
		MOVF		CCL,W
		CALL 		IM1
		MOVWF		VC7
	
		CALL 		MOV2
		MOVF		CCL,W
		CALL 		IM2
		MOVWF		VC77
		
		INCF		CCL

C_MOS2
			
		MOVF		VC00,W
		MOVWF		PORTB
		MOVLW		0x7F
		MOVWF		PORTC
		CALL 		RT	
		
		MOVF		VC11,W
		MOVWF		PORTB
		MOVLW		0xBF
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC22,W
		MOVWF		PORTB
		MOVLW		0xDF
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC33,W
		MOVWF		PORTB
		MOVLW		0xEF
		MOVWF		PORTC
		CALL 		RT	
		
		MOVF		VC44,W
		MOVWF		PORTB
		MOVLW		0xF7
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC55,W
		MOVWF		PORTB
		MOVLW		0xFB
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC66,W
		MOVWF		PORTB
		MOVLW		0xFD
		MOVWF		PORTC
		CALL 		RT

		MOVF		VC77,W
		MOVWF		PORTB
		MOVLW		0xFE
		MOVWF		PORTC
		CALL 		RT

		DECFSZ		CX2,F
		GOTO		C_MOS2
		
		
		CALL 		MOV1
		MOVF		CCL,W
		CALL 		IM1
		MOVWF		VC7
	
		CALL 		MOV2
		MOVF		CCL,W
		CALL 		IM2
		MOVWF		VC77
		
		INCF		CCL
		DECFSZ		CL,F
		GOTO 		C_MOV

		GOTO		C_P


	
MOV1
		MOVF		VC1,W
		MOVWF		VC0
		MOVF		VC2,W
		MOVWF		VC1
		MOVF		VC3,W
		MOVWF		VC2
		MOVF		VC4,W
		MOVWF		VC3
		MOVF		VC5,W
		MOVWF		VC4
		MOVF		VC6,W
		MOVWF		VC5
		MOVF		VC7,W
		MOVWF		VC6
	RETURN
MOV2
		MOVF		VC11,W
		MOVWF		VC00
		MOVF		VC22,W
		MOVWF		VC11
		MOVF		VC33,W
		MOVWF		VC22
		MOVF		VC44,W
		MOVWF		VC33
		MOVF		VC55,W
		MOVWF		VC44
		MOVF		VC66,W
		MOVWF		VC55
		MOVF		VC77,W
		MOVWF		VC66
	RETURN

IM1	
		ADDWF		PCL,F		
		RETLW		0x00
		RETLW		0x00

		RETLW		0X3F
		RETLW		0x6E
		RETLW		0xEB
		RETLW		0xFA
		RETLW		0xCB
		RETLW		0x6E
		RETLW		0x7F

		RETLW		0x00
		RETLW		0x00		

		RETLW		0X3F
		RETLW		0x6E
		RETLW		0xEB
		RETLW		0xFA
		RETLW		0xCB
		RETLW		0x6E
		RETLW		0x7F

		RETLW		0x00
		RETLW		0x00

		RETLW		0X3F
		RETLW		0x6E
		RETLW		0xEB
		RETLW		0xFA
		RETLW		0xCB
		RETLW		0x6E
		RETLW		0x7F

		RETLW		0x00
		RETLW		0x00
		RETLW		0x00

		RETLW		0x42
		RETLW		0xE7
		RETLW		0xFF
		RETLW		0xFF
		RETLW		0xFF
		RETLW		0x7E
		RETLW		0X3C
	
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00

IM2	
		ADDWF		PCL,F
		RETLW		0x00
		RETLW		0x00

		RETLW		0X3E
		RETLW		0x6F
		RETLW		0xEA
		RETLW		0xFB
		RETLW		0xCA
		RETLW		0x6F
		RETLW		0x7E

		RETLW		0x00
		RETLW		0x00		

		RETLW		0X3E
		RETLW		0x6F
		RETLW		0xEA
		RETLW		0xFB
		RETLW		0xCA
		RETLW		0x6F
		RETLW		0x7E

		RETLW		0x00
		RETLW		0x00
	
		RETLW		0X3E
		RETLW		0x6F
		RETLW		0xEA
		RETLW		0xFB
		RETLW		0xCA
		RETLW		0x6F
		RETLW		0x7E

		RETLW		0x00
		RETLW		0x00
		RETLW		0x00

		RETLW		0X3C
		RETLW		0x7E
		RETLW		0xFF
		RETLW		0xFF
		RETLW		0xFF
		RETLW		0x7E
		RETLW		0x3C
		
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00
		RETLW		0x00

RT
		CLRF	TMR0
E64I	BTFSS	TMR0,4
		GOTO	E64I
		RETURN

		END




















