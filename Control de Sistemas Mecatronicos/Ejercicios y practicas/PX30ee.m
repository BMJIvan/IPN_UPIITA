clc
clear all
close all

num=[0,1,1,0,0];
den=[1,9,30,44,24];
[r,p,k]=residue(num,den);

A=[-2,1,0,0
   0,-2,1,0
   0,0,-2,0
   0,0,0,-3];
B=[0;0;1;1];
C=[-4,12,-17,18];

syms x10 x20 x30 x40 u0 u1 u2

% y1=2;
% y2=1;
% y3=2;
% y4=2;

x11=-2*x10+x20;
x21=-2*x20+x30;
x31=-2*x30+u0;
x41=-3*x40+u0;

x12=-2*x11+x21;
x22=-2*x21+x31;
x32=-2*x31+u1;
x42=-3*x41+u1;

x13=-2*x12+x22;
x23=-2*x22+x32;
x33=-2*x32+u2;
x43=-3*x42+u2;

y1=(-4*x10)+(12*x20)-(17*x30)+(18*x40);
y2=(-4*x11)+(12*x21)-(17*x31)+(18*x41);
y3=(-4*x12)+(12*x22)-(17*x32)+(18*x42);
y4=(-4*x13)+(12*x23)-(17*x33)+(18*x43);

y00=2;
y11=1;
y22=2;
y33=2;

ecu=[-4,12,-17,18
     8,-28,46,-54
     -16,64,-120,162
     32,-144,304,-486];
res=[y00,y11-u0,y22-u1+(8*u0),y33-(42*u0)+(8*u1)-u2];
res=subs(res,{u0,u1,u2},{sin(0),sin(1),sin(2)});

detp=det(ecu);
X=zeros(1,4);
for i=1:4
    ecui=ecu;
    ecui(:,i)=res;
    X(i)=det(ecui)/detp;
end
